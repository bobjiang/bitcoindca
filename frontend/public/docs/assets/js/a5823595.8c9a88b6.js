"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[421],{6879:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(3303);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},9323:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"user-guides/create-position","title":"Create a Position","description":"Step-by-step instructions for creating and funding a new DCA Crypto strategy from the web app or Safe App.","source":"@site/docs/user-guides/create-position.md","sourceDirName":"user-guides","slug":"/user-guides/create-position","permalink":"/docs/user-guides/create-position","draft":false,"unlisted":false,"editUrl":"https://github.com/bobjiang/dca-crypto/tree/main/docs/docs/user-guides/create-position.md","tags":[],"version":"current","frontMatter":{"title":"Create a Position","sidebar_label":"Create a Position","description":"Step-by-step instructions for creating and funding a new DCA Crypto strategy from the web app or Safe App."},"sidebar":"primarySidebar","previous":{"title":"Security Controls","permalink":"/docs/core-concepts/security-controls"},"next":{"title":"Manage Positions","permalink":"/docs/user-guides/manage-balances"}}');var t=i(7711),r=i(6879);const o={title:"Create a Position",sidebar_label:"Create a Position",description:"Step-by-step instructions for creating and funding a new DCA Crypto strategy from the web app or Safe App."},a="Create a Position",l={},c=[{value:"1. Connect your wallet",id:"1-connect-your-wallet",level:2},{value:"2. Choose strategy direction",id:"2-choose-strategy-direction",level:2},{value:"3. Configure schedule",id:"3-configure-schedule",level:2},{value:"4. Set safeguards",id:"4-set-safeguards",level:2},{value:"5. Review limits",id:"5-review-limits",level:2},{value:"6. Submit the transaction",id:"6-submit-the-transaction",level:2},{value:"7. Fund the position",id:"7-fund-the-position",level:2},{value:"8. Verify readiness",id:"8-verify-readiness",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"create-a-position",children:"Create a Position"})}),"\n",(0,t.jsxs)(n.p,{children:["This guide walks end-users through the full creation flow for a recurring DCA strategy. Screens and terminology match the frontend application (",(0,t.jsx)(n.code,{children:"frontend"})," workspace) and Safe App mode."]}),"\n",(0,t.jsx)(n.h2,{id:"1-connect-your-wallet",children:"1. Connect your wallet"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Open the DCA Crypto dashboard and connect with RainbowKit (MetaMask, Rabby, WalletConnect, Ledger, or Safe)."}),"\n",(0,t.jsxs)(n.li,{children:["If you plan to act through a Safe, ensure the Safe owner approvals are configured. Safe mode enforces additional checks (see ",(0,t.jsxs)(n.a,{href:"/docs/developer/integration-guide#safe-app-considerations",children:[(0,t.jsx)(n.code,{children:"frontend"})," Safe guard"]}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"2-choose-strategy-direction",children:"2. Choose strategy direction"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Buy"})," \u2014 accumulate WBTC or ETH using USDC. You should hold USDC before funding."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sell"})," \u2014 unwind WBTC into USDC. The base asset balance will be debited over time."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"3-configure-schedule",children:"3. Configure schedule"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Amount per period"})," \u2014 Denominated in USDC for buys, or WBTC/ETH for sells."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Frequency"})," \u2014 Daily, weekly, or monthly. Internally encoded as 0/1/2."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Start time"})," \u2014 Optional delay before the first execution. Useful for aligning with salary inflows or market windows."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"End time"})," \u2014 Optional timestamp to auto-stop the position."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Max investment amount (optional)"})," - The lump sum for the DCA position."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"4-set-safeguards",children:"4. Set safeguards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Slippage tolerance"})," (default 0.5%). Lower values = stricter execution, higher chance of skips."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Max price deviation"})," (default 1%). Restricts divergence from Chainlink/TWAP."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"TWAP window"})," (default 1 hour). Increase if you want smoother pricing in volatile periods."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Price cap/floor"})," \u2014 Hard USD guard rails."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"MEV mode"})," \u2014 Private (Flashbots/CoW) or Public (shorter grace period, reduced slippage)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Venue"})," \u2014 Auto routing or force a specific DEX (Uniswap v3, CoW, 1inch)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Gas caps"})," \u2014 Optional base fee / priority fee limits."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"5-review-limits",children:"5. Review limits"}),"\n",(0,t.jsx)(n.p,{children:"Before submitting, confirm you are within system constraints:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"minPositionSizeUsd"})," (e.g. $100) \u2014 enforced by Chainlink price feeds."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"maxPositionsPerUser"})," \u2014 prevents spam."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"maxGlobalPositions"})," \u2014 ensures keepers can keep up."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["If the manager rejects the transaction, check ",(0,t.jsx)(n.code,{children:"ExecutionSkipped"})," reasons or consult the ",(0,t.jsx)(n.a,{href:"/docs/troubleshooting/",children:"Troubleshooting"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"6-submit-the-transaction",children:"6. Submit the transaction"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Confirm ",(0,t.jsx)(n.code,{children:"createPosition"})," in your wallet."]}),"\n",(0,t.jsxs)(n.li,{children:["Upon success, you receive a ",(0,t.jsx)(n.code,{children:"PositionNFT"}),". In Safe mode, the transaction requires the configured number of signatures."]}),"\n",(0,t.jsxs)(n.li,{children:["The UI shows the newly assigned ",(0,t.jsx)(n.code,{children:"positionId"})," and ",(0,t.jsx)(n.code,{children:"nextExecAt"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"7-fund-the-position",children:"7. Fund the position"}),"\n",(0,t.jsxs)(n.p,{children:["Creating a position and funding it are two distinct on-chain transactions. The initial ",(0,t.jsx)(n.code,{children:"createPosition"})," call stores strategy parameters and mints the ",(0,t.jsx)(n.code,{children:"PositionNFT"}),", but it does ",(0,t.jsx)(n.strong,{children:"not"})," pull tokens from your wallet\u2014this keeps the flow flexible for top-ups or multi-owner approvals."]}),"\n",(0,t.jsx)(n.p,{children:"Immediately after the creation transaction confirms, the app prompts you to deposit in the same session:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Deposit"})," and choose the asset matching your strategy direction."]}),"\n",(0,t.jsxs)(n.li,{children:["The UI submits a second transaction (",(0,t.jsx)(n.code,{children:"deposit(positionId, token, amount)"}),"), which credits the manager\u2019s internal balances."]}),"\n",(0,t.jsx)(n.li,{children:"In a Safe, the frontend batches both calls in a single multi-send so you can sign once; externally owned accounts simply confirm two sequential transactions."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Funding requirements are documented in ",(0,t.jsx)(n.code,{children:"contracts/test/system.behavior.spec.ts"}),", ensuring executions fail gracefully if funds are insufficient. You can also return later to top up additional liquidity using the same ",(0,t.jsx)(n.code,{children:"deposit"})," flow."]}),"\n",(0,t.jsx)(n.h2,{id:"8-verify-readiness",children:"8. Verify readiness"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The dashboard should display ",(0,t.jsx)(n.strong,{children:"Status: Active"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"nextExecAt"})," is in the future, and ",(0,t.jsx)(n.code,{children:"Eligible"})," status shows ",(0,t.jsx)(n.strong,{children:"Yes"})," when the time window arrives."]}),"\n",(0,t.jsxs)(n.li,{children:["Inspect the activity feed for the ",(0,t.jsx)(n.code,{children:"PositionCreated"})," and ",(0,t.jsx)(n.code,{children:"Deposited"})," events with the expected payload."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Your strategy will now execute automatically. Continue to ",(0,t.jsx)(n.a,{href:"/docs/user-guides/manage-balances",children:"Manage Positions"})," for ongoing operations."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);