"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[360],{5355:(e,s,d)=>{d.r(s),d.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"reference/configuration","title":"Configuration Matrix","description":"System-wide and per-position configuration values with defaults, bounds, and governance responsibilities.","source":"@site/docs/reference/configuration.md","sourceDirName":"reference","slug":"/reference/configuration","permalink":"/docs/reference/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/bobjiang/dca-crypto/tree/main/docs/docs/reference/configuration.md","tags":[],"version":"current","frontMatter":{"title":"Configuration Matrix","sidebar_label":"Configuration","description":"System-wide and per-position configuration values with defaults, bounds, and governance responsibilities."},"sidebar":"primarySidebar","previous":{"title":"Events","permalink":"/docs/reference/events"},"next":{"title":"FAQ","permalink":"/docs/troubleshooting/faq"}}');var n=d(7711),r=d(6879);const t={title:"Configuration Matrix",sidebar_label:"Configuration",description:"System-wide and per-position configuration values with defaults, bounds, and governance responsibilities."},c="Configuration Matrix",l={},o=[{value:"Protocol constants",id:"protocol-constants",level:2},{value:"Position defaults",id:"position-defaults",level:2},{value:"Keeper registries",id:"keeper-registries",level:2},{value:"Roles &amp; governance",id:"roles--governance",level:2},{value:"Environment variables",id:"environment-variables",level:2},{value:"Post-change checklist",id:"post-change-checklist",level:2}];function h(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"configuration-matrix",children:"Configuration Matrix"})}),"\n",(0,n.jsx)(s.p,{children:"This matrix documents protocol-wide settings alongside position-level defaults. Governance changes should keep this page up to date."}),"\n",(0,n.jsx)(s.h2,{id:"protocol-constants",children:"Protocol constants"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Parameter"}),(0,n.jsx)(s.th,{children:"Default"}),(0,n.jsx)(s.th,{children:"Bounds"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"Source"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"protocolFeeBps"})}),(0,n.jsx)(s.td,{children:"20 bps"}),(0,n.jsx)(s.td,{children:"10 \u2013 30 bps"}),(0,n.jsx)(s.td,{children:"Fee charged on successful executions, routed to Treasury."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ProtocolConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"executionFeeFixedWei"})}),(0,n.jsx)(s.td,{children:"0.0005 ETH"}),(0,n.jsx)(s.td,{children:"Governance defined"}),(0,n.jsx)(s.td,{children:"Flat keeper incentive for public executions."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ProtocolConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"gasPremiumBps"})}),(0,n.jsx)(s.td,{children:"100 bps"}),(0,n.jsx)(s.td,{children:"Governance defined"}),(0,n.jsx)(s.td,{children:"Extra gas incentive for private keepers."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ProtocolConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"feeCollector"})}),(0,n.jsx)(s.td,{children:"Treasury multisig"}),(0,n.jsx)(s.td,{children:"\u2014"}),(0,n.jsx)(s.td,{children:"Address receiving aggregated fees."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ProtocolConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"maxPositionsPerUser"})}),(0,n.jsx)(s.td,{children:"10"}),(0,n.jsx)(s.td,{children:"1 \u2013 20"}),(0,n.jsx)(s.td,{children:"Prevents spam and keeps keeper load manageable."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"CircuitBreakerConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"maxGlobalPositions"})}),(0,n.jsx)(s.td,{children:"10,000"}),(0,n.jsx)(s.td,{children:"Governance defined"}),(0,n.jsx)(s.td,{children:"Hard cap on concurrent strategies."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"CircuitBreakerConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"minPositionSizeUsd"})}),(0,n.jsx)(s.td,{children:"$100"}),(0,n.jsx)(s.td,{children:"$50 \u2013 $5,000"}),(0,n.jsx)(s.td,{children:"Minimum USD value at creation/funding."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"CircuitBreakerConfig"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"executionGracePeriodSeconds"})}),(0,n.jsx)(s.td,{children:"21,600s (6h)"}),(0,n.jsx)(s.td,{children:"1h \u2013 12h"}),(0,n.jsx)(s.td,{children:"Delay before public executions are allowed."}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"frontend/lib/protocol.ts"})})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"position-defaults",children:"Position defaults"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Field"}),(0,n.jsx)(s.th,{children:"Default"}),(0,n.jsx)(s.th,{children:"Notes"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"slippageBps"})}),(0,n.jsx)(s.td,{children:"50 (0.5%)"}),(0,n.jsxs)(s.td,{children:["clamped by ",(0,n.jsx)(s.code,{children:"maxSlippageBps"})," (1,000)."]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"maxPriceDeviationBps"})}),(0,n.jsx)(s.td,{children:"100 (1%)"}),(0,n.jsx)(s.td,{children:"Lowered automatically for public execution."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"twapWindow"})}),(0,n.jsx)(s.td,{children:"3,600 seconds"}),(0,n.jsx)(s.td,{children:"Must be \u2265 600 seconds."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"priceCapUsd"})," / ",(0,n.jsx)(s.code,{children:"priceFloorUsd"})]}),(0,n.jsx)(s.td,{children:"0 (disabled)"}),(0,n.jsx)(s.td,{children:"Optional guard rails."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"venue"})}),(0,n.jsx)(s.td,{children:"AUTO"}),(0,n.jsx)(s.td,{children:"Use manual venues for deterministic routing."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"mevMode"})}),(0,n.jsx)(s.td,{children:"PRIVATE"}),(0,n.jsx)(s.td,{children:"Fallback to PUBLIC only when necessary."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"maxBaseFeeWei"})," / ",(0,n.jsx)(s.code,{children:"maxPriorityFeeWei"})]}),(0,n.jsx)(s.td,{children:"0 (unbounded)"}),(0,n.jsx)(s.td,{children:"Set when gas volatility is a concern."})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:["The defaults match ",(0,n.jsx)(s.code,{children:"PROTOCOL_CONSTANTS"})," exported from ",(0,n.jsx)(s.code,{children:"frontend/lib/protocol.ts"})," and validated via tests."]}),"\n",(0,n.jsx)(s.h2,{id:"keeper-registries",children:"Keeper registries"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Network"}),(0,n.jsx)(s.th,{children:"Chainlink Registrar"}),(0,n.jsx)(s.th,{children:"Gelato Automate"}),(0,n.jsx)(s.th,{children:"Executor Address"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Mainnet (prod)"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Sepolia / Test"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"0x..."})})]})]})]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["Update this table after deployments. Store canonical addresses in ",(0,n.jsx)(s.code,{children:"contracts/utils/constants.ts"}),"."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"roles--governance",children:"Roles & governance"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Role"}),(0,n.jsx)(s.th,{children:"Holder"}),(0,n.jsx)(s.th,{children:"Responsibilities"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"DEFAULT_ADMIN_ROLE"})}),(0,n.jsx)(s.td,{children:"Multisig + timelock"}),(0,n.jsx)(s.td,{children:"Upgrades, role assignment."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"PAUSER_ROLE"})}),(0,n.jsx)(s.td,{children:"Multisig ops team"}),(0,n.jsx)(s.td,{children:"Pause/resume system, asset-specific pauses."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"TREASURER_ROLE"})}),(0,n.jsx)(s.td,{children:"Treasury multisig"}),(0,n.jsx)(s.td,{children:"Fee config, treasury withdrawals."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"EXECUTOR_ROLE"})," / ",(0,n.jsx)(s.code,{children:"KEEPER_ROLE"})]}),(0,n.jsx)(s.td,{children:"Keeper registries"}),(0,n.jsx)(s.td,{children:"Manage authorised executors."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ROUTER_ADMIN_ROLE"})}),(0,n.jsx)(s.td,{children:"Protocol engineering"}),(0,n.jsx)(s.td,{children:"Approve adapters, update routing defaults."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"ORACLE_ADMIN_ROLE"})}),(0,n.jsx)(s.td,{children:"Oracle ops"}),(0,n.jsx)(s.td,{children:"Update Chainlink feeds, TWAP settings."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"EMERGENCY_ROLE"})}),(0,n.jsx)(s.td,{children:"Security council"}),(0,n.jsx)(s.td,{children:"Trigger emergency withdraw timers."})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"environment-variables",children:"Environment variables"}),"\n",(0,n.jsx)(s.p,{children:"Populate deployment and keeper scripts with the following:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Variable"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"RPC_URL"})}),(0,n.jsx)(s.td,{children:"JSON-RPC endpoint (Alchemy/Infura)."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"CHAINLINK_REGISTRAR"})}),(0,n.jsx)(s.td,{children:"Chainlink Automation registrar address."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"GELATO_AUTOMATE"})}),(0,n.jsx)(s.td,{children:"Gelato Automate address."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"FLASHBOTS_RELAY"})}),(0,n.jsx)(s.td,{children:"Flashbots RPC endpoint for private tx."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"EXECUTOR_PRIVATE_KEY"})}),(0,n.jsx)(s.td,{children:"Keeper signing key (store securely)."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"SAFE_ADDRESS"})}),(0,n.jsx)(s.td,{children:"Multisig address for admin operations."})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"post-change-checklist",children:"Post-change checklist"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Update ",(0,n.jsx)(s.code,{children:"ProtocolConfig"})," / ",(0,n.jsx)(s.code,{children:"CircuitBreakerConfig"})," on-chain via timelock."]}),"\n",(0,n.jsxs)(s.li,{children:["Reflect new values in ",(0,n.jsx)(s.code,{children:"frontend/lib/protocol.ts"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["Regenerate TypeScript types (",(0,n.jsx)(s.code,{children:"pnpm -F contracts typechain"}),")."]}),"\n",(0,n.jsxs)(s.li,{children:["Rebuild docs (",(0,n.jsx)(s.code,{children:"pnpm -F docs build"}),") and ensure this page mirrors on-chain settings."]}),"\n",(0,n.jsx)(s.li,{children:"Notify keepers and users via Discord/EPNS."}),"\n"]})]})}function x(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},6879:(e,s,d)=>{d.d(s,{R:()=>t,x:()=>c});var i=d(3303);const n={},r=i.createContext(n);function t(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);